<!--
  ~ AGPL File-Header
  ~
  ~ Copyright (C) 2018 DV Bern AG, Switzerland
  ~
  ~ This program is free software: you can redistribute it and/or modify
  ~ it under the terms of the GNU Affero General Public License as
  ~ published by the Free Software Foundation, either version 3 of the
  ~ License, or (at your option) any later version.
  ~
  ~ This program is distributed in the hope that it will be useful,
  ~ but WITHOUT ANY WARRANTY; without even the implied warranty of
  ~ MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  ~ GNU Affero General Public License for more details.
  ~
  ~ You should have received a copy of the GNU Affero General Public License
  ~ along with this program.  If not, see <https://www.gnu.org/licenses/>.
  -->

<form role="form"
      #form="ngForm"
      [ngClass]="{'ng-submitted': form.submitted}"
      *ngIf="stammdaten$ | async as stammdaten"
      (ngSubmit)="editGemeindeStammdaten()"
      novalidate>

    <dv-gemeinde-header
        [gemeinde]="stammdaten.gemeinde"
        [administratoren]="stammdaten.administratoren"
        [sachbearbeiter]="stammdaten.sachbearbeiter">
    </dv-gemeinde-header>

    <dv-full-height-container>
        <div class="dv-content">
            <fieldset>
                <div class="viewTitle">
                    <h3 translate>GEMEINDE_STAMMDATEN</h3>
                    <hr class="header">
                </div>
                <div class="row">
                    <!-- Kontaktadresse -->
                    <div class="col-sm-3">
                        <div class="form-group">
                            <h3 translate>KONTAKTADRESSE</h3>
                            <p>{{stammdaten.adresse.organisation}}</p>
                            <p>{{stammdaten.adresse.strasse}} {{stammdaten.adresse.hausnummer}}</p>
                            <p>{{stammdaten.adresse.plz}} {{stammdaten.adresse.ort}}</p>
                        </div>
                    </div>
                    <!-- E-Mail, Telefon -->
                    <div class="col-sm-3">
                        <div class="form-group">
                            <h3>&nbsp;</h3>
                            <p><a href="mailto:{{stammdaten.mail}}">{{stammdaten.mail}}</a></p>
                            <p><a href="tel:{{stammdaten.telefon}}">{{stammdaten.telefon}}</a></p>
                            <p><a href="{{stammdaten.webseite}}" target="tah">{{stammdaten.webseite}}</a></p>
                        </div>
                    </div>
                    <!-- Beschwerdeadresse -->
                    <div *ngIf="keineBeschwerdeAdresse" class="col-sm-6">
                        <div class="form-group">
                            <h3 translate>BESCHWERDE_ADRESSE</h3>
                            <p translate>BESCHWERDE_ADRESSE_IDENTISCH_KONTAKT</p>
                        </div>
                    </div>
                    <div *ngIf="!keineBeschwerdeAdresse" class="col-sm-6">
                        <div class="form-group">
                            <h3 translate>BESCHWERDE_ADRESSE</h3>
                            <p>{{stammdaten.beschwerdeAdresse.organisation}}</p>
                            <p>{{stammdaten.beschwerdeAdresse.strasse}} {{stammdaten.adresse.hausnummer}}</p>
                            <p>{{stammdaten.beschwerdeAdresse.plz}} {{stammdaten.adresse.ort}}</p>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <!-- Korrespondenzsprache -->
                    <div class="col-sm-6">
                        <div class="form-group">
                            <h3 translate>KORRESPONDENZSPRACHE</h3>
                            <p>{{korrespondenzsprache}}</p>
                        </div>
                    </div>
                    <!-- Standardverantwortliche -->
                    <div *ngIf="stammdaten.defaultBenutzerBG" class="col-sm-6">
                        <div class="form-group">
                            <h3 translate>STANDARD_VERANTWORTLICHE</h3>
                            <p>{{stammdaten.defaultBenutzerBG.vorname}} {{stammdaten.defaultBenutzerBG.nachname}}</p>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="dv-footer">
                        <dv-loading-button *ngIf="isStammdatenEditable()"
                                           [type]="'submit'">
                            <span translate>STAMMDATEN_EDIT</span>
                        </dv-loading-button>
                        <button type="button" class="dv-btn cancel-button"
                                (click)="cancel()"
                                [textContent]="'CANCEL' | translate">
                        </button>
                    </div>
                </div>

            </fieldset>

            <fieldset>
                <dv-gemeinde-konfiguration
                    [konfigurationsListe]="stammdaten.konfigurationsListe"
                    [gemeindeStatus]="stammdaten.gemeinde.status"
                    [beguStartDate]="stammdaten.gemeinde.betreuungsgutscheineStartdatum">
                </dv-gemeinde-konfiguration>
            </fieldset>

        </div>
    </dv-full-height-container>
</form>
