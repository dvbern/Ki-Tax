<!--
  ~ Ki-Tax: System for the management of external childcare subsidies
  ~ Copyright (C) 2017 City of Bern Switzerland
  ~ This program is free software: you can redistribute it and/or modify
  ~ it under the terms of the GNU Affero General Public License as
  ~ published by the Free Software Foundation, either version 3 of the
  ~ License, or (at your option) any later version.
  ~ This program is distributed in the hope that it will be useful,
  ~ but WITHOUT ANY WARRANTY; without even the implied warranty of
  ~ MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
  ~ GNU Affero General Public License for more details.
  ~ You should have received a copy of the GNU Affero General Public License
  ~ along with this program. If not, see <http://www.gnu.org/licenses/>.
  -->

<md-menu-bar ng-if="vm.getPrincipal()" class="user-menu">
    <md-menu>
        <button ng-click="$mdMenu.open()" aria-label="{{vm.getPrincipal().getFullName()}}" id="usermenu">
            <span ng-bind="vm.getPrincipal().getFullName()"></span>
            <i class="fa fa-angle-down"></i>
        </button>

        <md-menu-content class="user-menu">
            <md-menu-item dv-show-element dv-show-allowed-roles="vm.TSRoleUtil.getSuperAdminRoles()">
                <md-button ui-sref-active="active" ui-sref="testdaten" aria-label="{{'ADMIN' | translate}}">
                    <a href="#" ng-click="$event.preventDefault();" data-translate="TESTDATEN"></a>
                </md-button>
            </md-menu-item>
            <md-menu-item dv-show-element dv-show-allowed-roles="vm.TSRoleUtil.getAdministratorRoles()">
                <md-button ui-sref-active="active" ui-sref="benutzerlist" aria-label="{{'BENUTZER' | translate}}">
                    <a href="#" ng-click="$event.preventDefault();" data-translate="BENUTZER"></a>
                </md-button>
            </md-menu-item>
            <md-menu-item dv-show-element dv-show-allowed-roles="vm.TSRoleUtil.getAdministratorRevisorRole()">
                <md-button ui-sref-active="active" ui-sref="admin" aria-label="{{'ADMIN' | translate}}">
                    <a href="#"ng-click="$event.preventDefault();" data-translate="ADMIN" aria-hidden></a>
                </md-button>
            </md-menu-item>
            <md-menu-item dv-show-element dv-show-allowed-roles="vm.TSRoleUtil.getAdministratorRevisorRole()">
                <md-button ui-sref-active="active" ui-sref="parameter" aria-label="{{'PARAMETER' | translate}}">
                    <a href="#" ng-click="$event.preventDefault();" data-translate="PARAMETER" aria-hidden></a>
                </md-button>
            </md-menu-item>
            <md-menu-item dv-show-element dv-show-allowed-roles="vm.TSRoleUtil.getAdministratorRevisorRole()">
                <md-button ui-sref-active="active" ui-sref="ferieninsel" aria-label="{{'FERIENINSEL' | translate}}">
                    <a href="#" ng-click="$event.preventDefault();" data-translate="FERIENINSEL" aria-hidden></a>
                </md-button>
            </md-menu-item>
            <md-menu-item dv-show-element dv-show-allowed-roles="vm.TSRoleUtil.getAdministratorRevisorRole()">
                <md-button ui-sref-active="active" ui-sref="institutionen" aria-label="{{'INSTITUTION' | translate}}">
                    <a href="#" ng-click="$event.preventDefault();" data-translate="INSTITUTION" aria-hidden></a>
                </md-button>
            </md-menu-item>
            <md-menu-item dv-show-element dv-show-allowed-roles="vm.TSRoleUtil.getAdministratorRevisorRole()">
                <md-button ui-sref-active="active" ui-sref="traegerschaft" aria-label="{{'TRAEGERSCHAFT' | translate}}">
                    <a href="#" ng-click="$event.preventDefault();" data-translate="TRAEGERSCHAFT" aria-hidden></a>
                </md-button>
            </md-menu-item>

            <md-menu-divider></md-menu-divider>

            <md-menu-item>
                <md-button ng-click="vm.logout()" aria-label="{{'AUSLOGGEN' | translate}}">
                    <a href="#" ng-click="$event.preventDefault();" data-translate="AUSLOGGEN" aria-hidden></a>
                </md-button>
            </md-menu-item>
            <md-menu-item class="versionInfo">
                <a href="https://github.com/StadtBern/Ki-Tax" target="_blank">Vers: {{vm.getVersion()}}: {{vm.getBuildtimestamp()}}</a>
            </md-menu-item>
        </md-menu-content>
    </md-menu>
</md-menu-bar>
