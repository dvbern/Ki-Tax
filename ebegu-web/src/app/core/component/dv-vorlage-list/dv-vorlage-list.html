<!--
  ~ Ki-Tax: System for the management of external childcare subsidies
  ~ Copyright (C) 2017 City of Bern Switzerland
  ~ This program is free software: you can redistribute it and/or modify
  ~ it under the terms of the GNU Affero General Public License as
  ~ published by the Free Software Foundation, either version 3 of the
  ~ License, or (at your option) any later version.
  ~ This program is distributed in the hope that it will be useful,
  ~ but WITHOUT ANY WARRANTY; without even the implied warranty of
  ~ MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
  ~ GNU Affero General Public License for more details.
  ~ You should have received a copy of the GNU Affero General Public License
  ~ along with this program. If not, see <http://www.gnu.org/licenses/>.
  -->

<div class="dv-vorlage-list">
    <div class="row">
        <div class="col-md-12">
            <table st-table="table" st-safe-src="vm.ebeguVorlageList"
                   class="table table-striped" width="100%">

                <tbody>
                <tr ng-repeat="row in table">

                    <td ng-click="$event.stopPropagation()" width="50%">
                        <a ng-bind="row.name | translate"
                           ngf-select="vm.uploadAnhaenge($files, row)"
                           accept=".pdf, .docx, .doc, image/*"
                           ngf-multiple="false"
                           ngf-max-size="'10MB'" ngf-max-total-size="100MB"
                           ngf-drop="vm.uploadAnhaenge($files, row)"
                           ngf-drag-over-class="'dragover'"
                           ng-if="!vm.isListReadonly()"
                           aria-hidden="true" style="color: black"></a>
                        <span ng-if="vm.isListReadonly()">{{row.name | translate}}</span>
                    </td>

                    <td ng-bind="row.vorlage.filename" width="22%"></td>
                    <td ng-bind="row.vorlage.timestampMutiert | amDateFormat : 'DD.MM.YYYY'"
                        width="10%"></td>
                    <td ng-bind="row.vorlage.filesize" width="10%"></td>
                    <td width="2%">
                                    <span ng-click="vm.download(row,true)" class="fa fa-download" aria-hidden="true"
                                          style="color: black" ng-if="vm.hasVorlage(row)"></span>
                        <span class="fa fa-download" aria-hidden="true"
                              style="color: lightgray"
                              ng-if="!vm.hasVorlage(row)"></span>
                    </td>
                    <td width="2%">
                                    <span ng-click="vm.download(row,false)" class="fa fa-eye" aria-hidden="true"
                                          style="color: black" ng-if="vm.hasVorlage(row)"></span>
                        <span class="fa fa-eye" aria-hidden="true"
                              style="color: lightgray"
                              ng-if="!vm.hasVorlage(row)"></span>
                    </td>
                    <td width="2%">
                                    <span ng-click="vm.remove(row, dokument)" class="fa fa-trash" aria-hidden="true"
                                          style="color: black" ng-if="vm.hasVorlage(row) && !vm.isListReadonly()"></span>
                        <span class="fa fa-trash" aria-hidden="true"
                              style="color: lightgray"
                              ng-if="!vm.hasVorlage(row) || vm.isListReadonly()"></span>
                    </td>

                    <td width="2%">
                        <i ng-if="!vm.hasVorlage(row)" class="fa fa-circle"
                           aria-hidden="true"
                           style="color: red"></i>
                        <i ng-if="vm.hasVorlage(row)" class="fa fa-check"
                           aria-hidden="true"
                           style="color: green"></i>
                    </td>
                </tbody>
            </table>
        </div>
    </div>
</div>
