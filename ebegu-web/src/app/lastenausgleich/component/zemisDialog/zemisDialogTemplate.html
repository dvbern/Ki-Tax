<!--
  ~ Ki-Tax: System for the management of external childcare subsidies
  ~ Copyright (C) 2017 City of Bern Switzerland
  ~ This program is free software: you can redistribute it and/or modify
  ~ it under the terms of the GNU Affero General Public License as
  ~ published by the Free Software Foundation, either version 3 of the
  ~ License, or (at your option) any later version.
  ~ This program is distributed in the hope that it will be useful,
  ~ but WITHOUT ANY WARRANTY; without even the implied warranty of
  ~ MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
  ~ GNU Affero General Public License for more details.
  ~ You should have received a copy of the GNU Affero General Public License
  ~ along with this program. If not, see <http://www.gnu.org/licenses/>.
  -->

<md-dialog md-theme="default" ng-class="vm.css"
           class="md-default-theme md-transition-in"
           role="dialog" tabindex="-1" id="input-year-dialog">

    <form role="form" name="vm.form">
        <md-dialog-content class="md-dialog-content" role="document" tabindex="-1" id="dialogContent">
            <div class="form-wrapper">
                <dv-input-container class="form-group" ng-if="!vm.upload">
                    <label class="md-no-float required" for="download-year" data-translate="LASTENAUSGLEICH_JAHR"></label>
                    <input type="number"
                           id="download-year"
                           name="jahr"
                           ng-model="vm.jahr"
                           class="form-control input-dv contrast-input"
                           required
                           aria-describedby="jahr-error">
                    <dv-error-messages input-id="jahr"
                                       for="vm.form.jahr.$error"
                                       class="error"></dv-error-messages>
                </dv-input-container>
                <div class="form-group" ng-if="vm.upload">
                    <label for="file"></label>
                    <input type="file"
                           id="file"
                           accept="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"
                           ngf-select="vm.handleFileInput($files)">
                </div>
            </div>
        </md-dialog-content>

        <md-dialog-actions layout-align="center center">
            <button class="dv-btn" type="submit"
                    ng-click="vm.ok()"
                    md-autofocus="dialog.$type==='alert'"
                    aria-label="{{'LABEL_OK' | translate}}"
                    ng-disabled="vm.upload && !vm.file">
                <span class="ng-binding ng-scope" data-translate="LABEL_OK"></span>
            </button>
            <button class="dv-btn cancel-button" type="button"
                    ng-click="vm.hide()" md-autofocus="dialog.$type==='alert'" aria-label="{{'CANCEL' | translate}}">
                <span class="ng-binding ng-scope" data-translate="CANCEL"></span>
            </button>
        </md-dialog-actions>
    </form>

</md-dialog>
