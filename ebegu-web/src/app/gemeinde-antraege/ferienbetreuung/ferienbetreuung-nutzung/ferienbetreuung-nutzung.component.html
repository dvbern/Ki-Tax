<!--
  ~ Copyright (C) 2021 DV Bern AG, Switzerland
  ~
  ~ This program is free software: you can redistribute it and/or modify
  ~ it under the terms of the GNU Affero General Public License as
  ~ published by the Free Software Foundation, either version 3 of the
  ~ License, or (at your option) any later version.
  ~
  ~ This program is distributed in the hope that it will be useful,
  ~ but WITHOUT ANY WARRANTY; without even the implied warranty of
  ~ MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
  ~ GNU Affero General Public License for more details.
  ~
  ~ You should have received a copy of the GNU Affero General Public License
  ~ along with this program. If not, see <https://www.gnu.org/licenses/>.
  -->

<div class="ferienbetreuung-nutzung">
    <h1 class="access-for-all-title" translate>FERIENBETREUUNG_NUTZUNG</h1>
    <div class="row view-title">
        <div class="col-md-12">
            <h2 translate>FERIENBETREUUNG_NUTZUNG</h2>
            <hr class="header"/>
        </div>
    </div>

    <form *ngIf="form" [formGroup]="form">

        <div class="max-width-container-750">

            <h3 translate class="uppercase">FERIENBETREUUNG_BETREUUNGSTAGE</h3>
            <dv-input-container-x>
                <label required
                       for="anzahlBetreuungstageKinderBern_id"
                       [ngClass]="{'label-error': form && form.get('anzahlBetreuungstageKinderBern').errors}">
                    {{'FERIENBETREUUNG_ANZAHL_BETREUUNGTAGE_KINDER_BERN' | translate }}
                    <dv-tooltip inputId="anzahlBetreuungstageKinderBern_id"
                                [text]="'FERIENBETREUUNG_ANZAHL_BETREUUNGTAGE_KINDER_BERN_HINT' | translate">
                    </dv-tooltip>
                </label>
                <mat-form-field floatLabel="always">
                    <mat-label translate></mat-label>
                    <input matInput
                           id="anzahlBetreuungstageKinderBern_id"
                           formControlName="anzahlBetreuungstageKinderBern"
                           class="form-control dv-input"/>
                    <mat-error *ngIf="form && form.get('anzahlBetreuungstageKinderBern').errors?.required"
                               translate>ERROR_REQUIRED
                    </mat-error>
                    <mat-error *ngIf="form && form.get('anzahlBetreuungstageKinderBern').errors?.isNotHalf"
                               translate>ERROR_NOT_HALF
                    </mat-error>
                </mat-form-field>
            </dv-input-container-x>

            <div class="custom-errors">
                <div *ngIf="form && form.get('anzahlBetreuungstageKinderBern').errors?.betreuungstageError">
                    <i class="fa fa-exclamation-triangle" aria-hidden="true"></i>
                    <span translate>ERROR_FB_BETREUUNGSTAGE</span>
                </div>
            </div>

            <dv-input-container-x>
                <label for="betreuungstageKinderDieserGemeinde_id"
                       class="padding-left-20"
                       required
                       [ngClass]="{'label-error': form && form.get('betreuungstageKinderDieserGemeinde').errors}">
                    {{'FERIENBETREUUNG_BETREUUNGSTAGE_KINDER_DIESER_GEMEINDE' | translate }}
                    <dv-tooltip inputId="betreuungstageKinderDieserGemeinde_id"
                                [text]="'FERIENBETREUUNG_BETREUUNGSTAGE_KINDER_DIESER_GEMEINDE_HINT' | translate">
                    </dv-tooltip>
                </label>
                <mat-form-field floatLabel="always">
                    <mat-label translate></mat-label>
                    <input matInput
                           id="betreuungstageKinderDieserGemeinde_id"
                           formControlName="betreuungstageKinderDieserGemeinde"
                           class="form-control dv-input"/>
                    <mat-error *ngIf="form && form.get('betreuungstageKinderDieserGemeinde').errors?.required"
                               translate>ERROR_REQUIRED
                    </mat-error>
                    <mat-error *ngIf="form && form.get('betreuungstageKinderDieserGemeinde').errors?.isNotHalf"
                               translate>ERROR_NOT_HALF
                    </mat-error>
                </mat-form-field>
            </dv-input-container-x>

            <dv-input-container-x>
                <label for="betreuungstageKinderDieserGemeindeSonderschueler_id"
                       class="padding-left-20"
                       [ngClass]="{'label-error': form && form.get('betreuungstageKinderDieserGemeindeSonderschueler').errors}">
                    {{'FERIENBETREUUNG_BETREUUNGSTAGE_SONDERSCHUELER' | translate }}
                </label>
                <mat-form-field floatLabel="always">
                    <mat-label translate></mat-label>
                    <input matInput
                           id="betreuungstageKinderDieserGemeindeSonderschueler_id"
                           formControlName="betreuungstageKinderDieserGemeindeSonderschueler"
                           class="form-control dv-input"/>
                    <mat-error
                        *ngIf="form && form.get('betreuungstageKinderDieserGemeindeSonderschueler').errors?.isNotHalf"
                        translate>ERROR_NOT_HALF
                    </mat-error>
                </mat-form-field>
            </dv-input-container-x>

            <div class="custom-errors">
                <div
                    *ngIf="form && form.get('betreuungstageKinderDieserGemeindeSonderschueler').errors?.sonderschuelerError"
                    translate>
                    <i class="fa fa-exclamation-triangle" aria-hidden="true"></i>
                    <span translate>ERROR_FB_SONDERSCHUELER</span>
                </div>
            </div>

            <dv-input-container-x>
                <label required
                       class="padding-left-20"
                       for="davonBetreuungstageKinderAndererGemeinden"
                       [ngClass]="{'label-error': form && form.get('davonBetreuungstageKinderAndererGemeinden').errors}">
                    {{'FERIENBETREUUNG_DAVON_BETREUUNGSTAGE_KINDER_ANDERER_GEMEINDEN' | translate }}
                </label>
                <mat-form-field floatLabel="always">
                    <mat-label translate></mat-label>
                    <input matInput
                           id="davonBetreuungstageKinderAndererGemeinden"
                           formControlName="davonBetreuungstageKinderAndererGemeinden"
                           class="form-control dv-input"/>
                    <mat-error *ngIf="form && form.get('davonBetreuungstageKinderAndererGemeinden').errors?.required"
                               translate>ERROR_REQUIRED
                    </mat-error>
                    <mat-error *ngIf="form && form.get('davonBetreuungstageKinderAndererGemeinden').errors?.isNotHalf"
                               translate>ERROR_NOT_HALF
                    </mat-error>
                </mat-form-field>
            </dv-input-container-x>

            <dv-input-container-x>
                <label for="davonBetreuungstageKinderAndererGemeindenSonderschueler_id"
                       class="padding-left-20"
                       [ngClass]="{'label-error': form && form.get('davonBetreuungstageKinderAndererGemeindenSonderschueler').errors}">
                    {{'FERIENBETREUUNG_BETREUUNGSTAGE_SONDERSCHUELER' | translate }}
                </label>
                <mat-form-field floatLabel="always">
                    <mat-label translate></mat-label>
                    <input matInput
                           id="davonBetreuungstageKinderAndererGemeindenSonderschueler_id"
                           formControlName="davonBetreuungstageKinderAndererGemeindenSonderschueler"
                           class="form-control dv-input"/>
                    <mat-error
                        *ngIf="form && form.get('davonBetreuungstageKinderAndererGemeindenSonderschueler').errors?.isNotHalf"
                        translate>ERROR_NOT_HALF
                    </mat-error>
                </mat-form-field>
            </dv-input-container-x>

            <div class="custom-errors">
                <div
                    *ngIf="form && form.get('davonBetreuungstageKinderAndererGemeindenSonderschueler').errors?.sonderschuelerError"
                    translate>
                    <i class="fa fa-exclamation-triangle" aria-hidden="true"></i>
                    <span translate>ERROR_FB_SONDERSCHUELER</span>
                </div>
            </div>
        </div>

        <mat-divider></mat-divider>

        <div class="max-width-container-750">

            <h3 translate class="uppercase">KINDER</h3>

            <dv-input-container-x>
                <label for="anzahlBetreuteKinder_id"
                       [ngClass]="{'label-error': form && form.get('anzahlBetreuteKinder').errors}">
                    {{'FERIENBETREUUNG_ANZAHL_BETREUTE_KINDER' | translate }}
                    <dv-tooltip inputId="anzahlBetreuteKinder_id"
                                [text]="'FERIENBETREUUNG_ANZAHL_BETREUTE_KINDER_HINT' | translate">
                    </dv-tooltip>
                </label>
                <mat-form-field floatLabel="always">
                    <mat-label translate></mat-label>
                    <input matInput
                           id="anzahlBetreuteKinder_id"
                           formControlName="anzahlBetreuteKinder"
                           class="form-control dv-input"/>
                    <mat-error
                        *ngIf="form && form.get('anzahlBetreuteKinder').errors?.isNotInteger"
                        translate>ERROR_NOT_INTEGER
                    </mat-error>
                </mat-form-field>
            </dv-input-container-x>

        <dv-input-container-x>
            <label for="anzahl_betreute_kinder_sonderschueler_id"
                   class="padding-left-20"
                   [ngClass]="{'label-error': form && form.get('anzahlBetreuteKinderSonderschueler').errors}">
                {{'FERIENBETREUUNG_ANZAHL_BETREUTE_KINDER_SONDERSCHUELER' | translate }}
            </label>
            <mat-form-field floatLabel="always">
                <mat-label translate></mat-label>
                <input matInput
                       id="anzahl_betreute_kinder_sonderschueler_id"
                       formControlName="anzahlBetreuteKinderSonderschueler"
                       class="form-control dv-input"/>
                <mat-error
                    *ngIf="form && form.get('anzahlBetreuteKinderSonderschueler').errors?.isNotInteger"
                    translate>ERROR_NOT_INTEGER
                </mat-error>
            </mat-form-field>
        </dv-input-container-x>

        <dv-input-container-x>
            <label for="anzahlBetreuteKinder1Zyklus_id"
                   class="padding-left-20"
                   [ngClass]="{'label-error': form && form.get('anzahlBetreuteKinder1Zyklus').errors}">
                <span [innerHTML]="'FERIENBETREUUNG_DAVON_KINDER_IM_1_ZYKLUS' | translate"></span>
                <dv-tooltip inputId="anzahlBetreuteKinder1Zyklus_id"
                            [text]="'FERIENBETREUUNG_DAVON_KINDER_IM_ZYKLUS_HINT' | translate">
                </dv-tooltip>
            </label>
            <mat-form-field floatLabel="always">
                <mat-label translate></mat-label>
                <input matInput
                       id="anzahlBetreuteKinder1Zyklus_id"
                       formControlName="anzahlBetreuteKinder1Zyklus"
                       class="form-control dv-input"/>
                <mat-error
                    *ngIf="form && form.get('anzahlBetreuteKinder1Zyklus').errors?.isNotInteger"
                    translate>ERROR_NOT_INTEGER
                </mat-error>
            </mat-form-field>
        </dv-input-container-x>

        <dv-input-container-x>
            <label for="anzahlBetreuteKinder2Zyklus_id"
                   class="padding-left-20"
                   [ngClass]="{'label-error': form && form.get('anzahlBetreuteKinder2Zyklus').errors}">
                <span [innerHTML]="'FERIENBETREUUNG_DAVON_KINDER_IM_2_ZYKLUS' | translate"></span>
                <dv-tooltip inputId="anzahlBetreuteKinder2Zyklus_id"
                            [text]="'FERIENBETREUUNG_DAVON_KINDER_IM_ZYKLUS_HINT' | translate">
                </dv-tooltip>
            </label>
            <mat-form-field floatLabel="always">
                <mat-label translate></mat-label>
                <input matInput
                       id="anzahlBetreuteKinder2Zyklus_id"
                       formControlName="anzahlBetreuteKinder2Zyklus"
                       class="form-control dv-input"/>
                <mat-error
                    *ngIf="form && form.get('anzahlBetreuteKinder2Zyklus').errors?.isNotInteger"
                    translate>ERROR_NOT_INTEGER
                </mat-error>
            </mat-form-field>
        </dv-input-container-x>

        <dv-input-container-x>
            <label for="anzahlBetreuteKinder3Zyklus_id"
                   class="padding-left-20"
                   [ngClass]="{'label-error': form && form.get('anzahlBetreuteKinder3Zyklus').errors}">
                <span [innerHTML]="'FERIENBETREUUNG_DAVON_KINDER_IM_3_ZYKLUS' | translate"></span>
                <dv-tooltip inputId="anzahlBetreuteKinder3Zyklus_id"
                            [text]="'FERIENBETREUUNG_DAVON_KINDER_IM_ZYKLUS_HINT' | translate">
                </dv-tooltip>
            </label>
            <mat-form-field floatLabel="always">
                <mat-label translate></mat-label>
                <input matInput
                       id="anzahlBetreuteKinder3Zyklus_id"
                       formControlName="anzahlBetreuteKinder3Zyklus"
                       class="form-control dv-input"/>
                <mat-error
                    *ngIf="form && form.get('anzahlBetreuteKinder3Zyklus').errors?.isNotInteger"
                    translate>ERROR_NOT_INTEGER
                </mat-error>
            </mat-form-field>
        </dv-input-container-x>

        </div>

    </form>

    <div class="actions margin-top-50">
        <button type="button" class="dv-btn cancel-button"
                *ngIf="canSeeSave | async"
                (click)="save()"
                [textContent]="'SAVE' | translate">
        </button>
        <dv-loading-button
            *ngIf="canSeeAbschliessen | async"
            type="button"
            (buttonClick)="onAbschliessen()">
            <span translate>ABSCHLIESSEN</span>
        </dv-loading-button>
    </div>

    <div class="row margin-top-20" *ngIf="canSeeFalscheAngaben | async">
        <div class="col-md-12">
            <a class="pointer-cursor" (click)="onFalscheAngaben()" translate>FALSCHE_ANGABEN</a>
        </div>
    </div>

</div>
