<!--
  ~ Ki-Tax: System for the management of external childcare subsidies
  ~ Copyright (C) 2017 City of Bern Switzerland
  ~ This program is free software: you can redistribute it and/or modify
  ~ it under the terms of the GNU Affero General Public License as
  ~ published by the Free Software Foundation, either version 3 of the
  ~ License, or (at your option) any later version.
  ~ This program is distributed in the hope that it will be useful,
  ~ but WITHOUT ANY WARRANTY; without even the implied warranty of
  ~ MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
  ~ GNU Affero General Public License for more details.
  ~ You should have received a copy of the GNU Affero General Public License
  ~ along with this program. If not, see <http://www.gnu.org/licenses/>.
  -->

<div class="statistik-view" dv-show-element
     dv-show-allowed-roles="['SACHBEARBEITER_BG','ADMIN_BG', 'SACHBEARBEITER_GEMEINDE', 'ADMIN_GEMEINDE', 'SUPER_ADMIN','REVISOR', 'ADMIN_TS', 'SACHBEARBEITER_TS',
     'ADMIN_INSTITUTION', 'SACHBEARBEITER_INSTITUTION', 'ADMIN_TRAEGERSCHAFT', 'SACHBEARBEITER_TRAEGERSCHAFT', 'ADMIN_MANDANT', 'SACHBEARBEITER_MANDANT']">
    <div class="row margin-top-50">
        <div class="col-md-10 col-md-offset-1">
            <dv-accordion allow-multiple-sections="false">
                <div dv-show-element
                     dv-show-allowed-roles="['SACHBEARBEITER_BG', 'ADMIN_BG', 'SACHBEARBEITER_GEMEINDE', 'ADMIN_GEMEINDE', 'SUPER_ADMIN', 'REVISOR',
                     'ADMIN_TS', 'SACHBEARBEITER_TS', 'ADMIN_MANDANT', 'SACHBEARBEITER_MANDANT']">
                    <dv-accordion-tab tabid="gesuch_stichtag">
                        <tab-title>
                            <span class="uppercase" data-translate="GESUCHE_NACH_STICHTAG"></span>
                            <dv-tooltip input-id="gesuch_stichtag_info"
                                        ng-click="$event.stopPropagation()"
                                        text="'STATISTIKEN_GESUCHE_NACH_STICHTAG_HINT' | translate">
                            </dv-tooltip>
                        </tab-title>
                        <tab-body>
                            <form name="gesuch_stichtag"
                                  ng-submit="vm.generateStatistik(gesuch_stichtag, 'GESUCH_STICHTAG')" novalidate>
                                <div class="row">
                                    <div class="col-xs-3">
                                        <dv-input-container class="form-group">
                                            <label class="md-no-float" for="stichtag_gesuch"
                                                   data-translate="STICHTAG"></label>
                                            <dv-datepicker name="stichtag_gesuch" id="stichtag_gesuch"
                                                           ng-model="vm.statistikParameter.stichtag" ng-required="true"
                                                           class="input-element">
                                            </dv-datepicker>
                                            <dv-error-messages for="gesuch_stichtag.stichtag_gesuch.$error"
                                                               class="error"></dv-error-messages>
                                        </dv-input-container>
                                    </div>
                                    <div class="col-xs-3">
                                        <div class="form-group">
                                            <label class="md-no-float" for="periode_gesuch_stichtag"
                                                   data-translate="GESUCHSPERIODEN"></label>
                                            <div class="dv-select-style">
                                                <select name="periode_gesuch_stichtag" id="periode_gesuch_stichtag"
                                                        ng-model="vm.statistikParameter.gesuchsperiode"
                                                        ng-options="gesuchsperiode.id as gesuchsperiode.gesuchsperiodeString for gesuchsperiode in vm.gesuchsperioden | orderBy: 'name'"
                                                        class="form-control">
                                                    <option value="">{{'KEINE' | translate}}</option>
                                                </select>
                                                <dv-error-messages for="gesuch_stichtag.periode_gesuch_stichtag.$error"
                                                                   class="error"></dv-error-messages>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-xs-3 col-xs-offset-3 statistik-button">
                                        <dv-loading-button type="submit"
                                                           style="margin-left:auto;margin-right:auto;width:13rem;">
                                            <span class="uppercase" data-translate="GENERIEREN"></span>
                                        </dv-loading-button>
                                    </div>
                                </div>
                            </form>
                        </tab-body>
                    </dv-accordion-tab>
                </div>

                <div dv-show-element
                     dv-show-allowed-roles="['SACHBEARBEITER_BG', 'ADMIN_BG', 'ADMIN_GEMEINDE', 'SACHBEARBEITER_GEMEINDE', 'ADMIN_BG', 'SUPER_ADMIN',
                     'REVISOR', 'ADMIN_TS', 'SACHBEARBEITER_TS', 'ADMIN_MANDANT', 'SACHBEARBEITER_MANDANT']">
                    <dv-accordion-tab tabid="gesuch_zeitraum">
                        <tab-title>
                            <span class="uppercase" data-translate="GESUCHE_NACH_ZEITRAUM"></span>
                            <dv-tooltip input-id="gesuch_zeitraum_info"
                                        ng-click="$event.stopPropagation()"
                                        text="'STATISTIKEN_GESUCHE_NACH_ZEITRAUM_HINT' | translate">
                            </dv-tooltip>
                        </tab-title>
                        <tab-body>
                            <form name="gesuch_zeitraum"
                                  ng-submit="vm.generateStatistik(gesuch_zeitraum, vm.TSStatistikParameterType.GESUCH_ZEITRAUM)"
                                  novalidate>
                                <div class="row">
                                    <div class="col-xs-3">
                                        <dv-input-container class="form-group">
                                            <label class="md-no-float" for="von_gesuch" data-translate="VON"></label>
                                            <dv-datepicker name="von_gesuch" id="von_gesuch"
                                                           ng-model="vm.statistikParameter.von" ng-required="true"
                                                           class="input-element">
                                            </dv-datepicker>
                                            <dv-error-messages for="gesuch_zeitraum.von_gesuch.$error"
                                                               class="error"></dv-error-messages>
                                        </dv-input-container>
                                    </div>
                                    <div class="col-xs-3">
                                        <dv-input-container class="form-group">
                                            <label class="md-no-float" for="bis_gesuch" data-translate="BIS"></label>
                                            <dv-datepicker name="bis_gesuch" id="bis_gesuch"
                                                           ng-model="vm.statistikParameter.bis" ng-required="true"
                                                           class="input-element">
                                            </dv-datepicker>
                                            <dv-error-messages for="gesuch_zeitraum.bis_gesuch.$error"
                                                               class="error"></dv-error-messages>
                                        </dv-input-container>
                                    </div>
                                    <div class="col-xs-3">
                                        <div class="form-group">
                                            <label class="md-no-float" for="periode_gesuch_zeitraum"
                                                   data-translate="GESUCHSPERIODEN"></label>
                                            <div class="dv-select-style">
                                                <select name="periode_gesuch_zeitraum" id="periode_gesuch_zeitraum"
                                                        ng-model="vm.statistikParameter.gesuchsperiode"
                                                        ng-options="gesuchsperiode.id as gesuchsperiode.gesuchsperiodeString for gesuchsperiode in vm.gesuchsperioden | orderBy: 'name'"
                                                        class="form-control">
                                                    <option value="">{{'KEINE' | translate}}</option>
                                                </select>
                                                <dv-error-messages for="gesuch_zeitraum.periode_gesuch_zeitraum.$error"
                                                                   class="error"></dv-error-messages>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-xs-3 statistik-button">
                                        <dv-loading-button type="submit"
                                                           style="margin-left:auto;margin-right:auto;width:13rem;">
                                            <span class="uppercase" data-translate="GENERIEREN"></span>
                                        </dv-loading-button>
                                    </div>
                                </div>
                            </form>
                        </tab-body>
                    </dv-accordion-tab>
                </div>

                <div dv-show-element
                     dv-show-allowed-roles="['SACHBEARBEITER_BG','ADMIN_BG','SUPER_ADMIN','REVISOR', 'ADMIN_MANDANT', 'SACHBEARBEITER_MANDANT',
                     'ADMIN_GEMEINDE', 'SACHBEARBEITER_GEMEINDE']">
                    <dv-accordion-tab tabid="zahlungen_periode">
                        <tab-title>
                            <span class="uppercase" data-translate="ZAHLUNGEN_NACH_PERIODE"></span>
                            <dv-tooltip input-id="zahlungen_periode_info"
                                        ng-click="$event.stopPropagation()"
                                        text="'STATISTIKEN_ZAHLUNGEN_HINT' | translate">
                            </dv-tooltip>
                        </tab-title>
                        <tab-body>
                            <form name="zahlungen_periode"
                                  ng-submit="vm.generateStatistik(zahlungen_periode, vm.TSStatistikParameterType.ZAHLUNGEN_PERIODE)"
                                  novalidate>
                                <div class="row">
                                    <div class="col-xs-3">
                                        <div class="form-group">
                                            <label class="md-no-float" for="periode_zahlungen_periode"
                                                   data-translate="GESUCHSPERIODEN"></label>
                                            <div class="dv-select-style">
                                                <select name="periode_zahlungen_periode" id="periode_zahlungen_periode"
                                                        ng-model="vm.statistikParameter.gesuchsperiode"
                                                        ng-options="gesuchsperiode.id as gesuchsperiode.gesuchsperiodeString for gesuchsperiode in vm.gesuchsperioden | orderBy: 'name'"
                                                        class="form-control" ng-required="true">
                                                </select>
                                                <dv-error-messages
                                                    for="zahlungen_periode.periode_zahlungen_periode.$error"
                                                    class="error"></dv-error-messages>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-xs-3 statistik-button">
                                        <dv-loading-button type="submit"
                                                           style="margin-left:auto;margin-right:auto;width:13rem;">
                                            <span class="uppercase" data-translate="GENERIEREN"></span>
                                        </dv-loading-button>
                                    </div>
                                </div>
                            </form>
                        </tab-body>
                    </dv-accordion-tab>
                </div>

                <div dv-show-element
                     dv-show-allowed-roles="['SACHBEARBEITER_BG','ADMIN_BG','SUPER_ADMIN','REVISOR', 'ADMIN_GEMEINDE', 'SACHBEARBEITER_GEMEINDE',
                     'ADMIN_MANDANT', 'SACHBEARBEITER_MANDANT', 'ADMIN_INSTITUTION', 'SACHBEARBEITER_INSTITUTION', 'ADMIN_TRAEGERSCHAFT',
                     'SACHBEARBEITER_TRAEGERSCHAFT']">
                    <dv-accordion-tab tabid="kinder">
                        <tab-title>
                            <span class="uppercase" data-translate="STATISTIK_KINDER"></span>
                            <dv-tooltip input-id="kinder_info"
                                        ng-click="$event.stopPropagation()"
                                        text="'STATISTIKEN_KINDER_HINT' | translate">
                            </dv-tooltip>
                        </tab-title>
                        <tab-body>
                            <form name="kinder"
                                  ng-submit="vm.generateStatistik(kinder, vm.TSStatistikParameterType.KINDER)"
                                  novalidate>
                                <div class="row">
                                    <div class="col-xs-3">
                                        <dv-input-container class="form-group">
                                            <label class="md-no-float" for="von_kinder" data-translate="VON"></label>
                                            <dv-datepicker name="von_kinder" id="von_kinder"
                                                           ng-model="vm.statistikParameter.von" ng-required="true"
                                                           class="input-element"
                                                           dv-min-date="vm.minDate" dv-max-date="vm.maxDate">
                                            </dv-datepicker>
                                            <dv-error-messages for="kinder.von_kinder.$error"
                                                               class="error"></dv-error-messages>
                                        </dv-input-container>
                                    </div>
                                    <div class="col-xs-3">
                                        <dv-input-container class="form-group">
                                            <label class="md-no-float" for="bis_kinder" data-translate="BIS"></label>
                                            <dv-datepicker name="bis_kinder" id="bis_kinder"
                                                           ng-model="vm.statistikParameter.bis" ng-required="true"
                                                           class="input-element"
                                                           dv-min-date="vm.minDate" dv-max-date="vm.maxDate">
                                            </dv-datepicker>
                                            <dv-error-messages for="kinder.bis_kinder.$error"
                                                               class="error"></dv-error-messages>
                                        </dv-input-container>
                                    </div>
                                    <div class="col-xs-3">
                                        <div class="form-group">
                                            <label class="md-no-float" for="periode_kinder"
                                                   data-translate="GESUCHSPERIODEN"></label>
                                            <div class="dv-select-style">
                                                <select name="periode_kinder" id="periode_kinder"
                                                        ng-model="vm.statistikParameter.gesuchsperiode"
                                                        ng-options="gesuchsperiode.id as gesuchsperiode.gesuchsperiodeString for gesuchsperiode in vm.gesuchsperioden | orderBy: 'name'"
                                                        class="form-control">
                                                    <option value="">{{'KEINE' | translate}}</option>
                                                </select>
                                                <dv-error-messages for="kinder.periode_kinder.$error"
                                                                   class="error"></dv-error-messages>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-xs-3 statistik-button">
                                        <dv-loading-button type="submit"
                                                           style="margin-left:auto;margin-right:auto;width:13rem;">
                                            <span class="uppercase" data-translate="GENERIEREN"></span>
                                        </dv-loading-button>
                                    </div>
                                </div>
                            </form>
                        </tab-body>
                    </dv-accordion-tab>
                </div>

                <div dv-show-element
                     dv-show-allowed-roles="['SACHBEARBEITER_BG','ADMIN_BG','SUPER_ADMIN','REVISOR', 'ADMIN_GEMEINDE', 'SACHBEARBEITER_GEMEINDE',
                     'ADMIN_MANDANT', 'SACHBEARBEITER_MANDANT']">
                    <dv-accordion-tab tabid="gesuchsteller">
                        <tab-title>
                            <span class="uppercase" data-translate="GESUCHSTELLER"></span>
                            <dv-tooltip input-id="gesuchsteller_info"
                                        ng-click="$event.stopPropagation()"
                                        text="'STATISTIKEN_GESUCHSTELLER_HINT' | translate">
                            </dv-tooltip>
                        </tab-title>
                        <tab-body>
                            <form name="gesuchsteller"
                                  ng-submit="vm.generateStatistik(gesuchsteller, vm.TSStatistikParameterType.GESUCHSTELLER)"
                                  novalidate>
                                <div class="row">
                                    <div class="col-xs-3">
                                        <dv-input-container class="form-group">
                                            <label class="md-no-float" for="stichtag_gesuchsteller"
                                                   data-translate="STICHTAG"></label>
                                            <dv-datepicker name="stichtag_gesuchsteller" id="stichtag_gesuchsteller"
                                                           ng-model="vm.statistikParameter.stichtag" ng-required="true"
                                                           class="input-element"
                                                           dv-min-date="vm.minDate" dv-max-date="vm.maxDate">
                                            </dv-datepicker>
                                            <dv-error-messages for="gesuchsteller.stichtag_gesuchsteller.$error"
                                                               class="error"></dv-error-messages>
                                        </dv-input-container>
                                    </div>
                                    <div class="col-xs-3 col-xs-offset-6 statistik-button">
                                        <dv-loading-button type="submit">
                                            <span class="uppercase" data-translate="GENERIEREN"></span>
                                        </dv-loading-button>
                                    </div>
                                </div>
                            </form>
                        </tab-body>
                    </dv-accordion-tab>
                </div>

                <div dv-show-element
                     dv-show-allowed-roles="['SACHBEARBEITER_BG','ADMIN_BG','SUPER_ADMIN','REVISOR', 'ADMIN_GEMEINDE', 'SACHBEARBEITER_GEMEINDE',
                     'ADMIN_INSTITUTION', 'SACHBEARBEITER_INSTITUTION', 'ADMIN_TRAEGERSCHAFT', 'SACHBEARBEITER_TRAEGERSCHAFT', 'ADMIN_MANDANT',
                     'SACHBEARBEITER_MANDANT']"
                     dv-show-expression="vm.showKantonStatistik">
                    <dv-accordion-tab tabid="kanton">
                        <tab-title>
                            <span class="uppercase" data-translate="KANTON"></span>
                            <dv-tooltip input-id="kanton_info"
                                        ng-click="$event.stopPropagation()"
                                        text="'STATISTIKEN_KANTON_HINT' | translate">
                            </dv-tooltip>
                        </tab-title>
                        <tab-body>
                            <form name="kanton"
                                  ng-submit="vm.generateStatistik(kanton, vm.TSStatistikParameterType.KANTON)"
                                  novalidate>
                                <div class="row">
                                    <div class="col-xs-3">
                                        <dv-input-container class="form-group">
                                            <label class="md-no-float" for="von_kanton" data-translate="VON"></label>
                                            <dv-datepicker name="von_kanton" id="von_kanton"
                                                           ng-model="vm.statistikParameter.von" ng-required="true"
                                                           class="input-element"
                                                           dv-min-date="vm.minDate" dv-max-date="vm.maxDate">
                                            </dv-datepicker>
                                            <dv-error-messages for="kanton.von_kanton.$error"
                                                               class="error"></dv-error-messages>
                                        </dv-input-container>
                                    </div>
                                    <div class="col-xs-3">
                                        <dv-input-container class="form-group">
                                            <label class="md-no-float" for="bis_kanton" data-translate="BIS"></label>
                                            <dv-datepicker name="bis_kanton" id="bis_kanton"
                                                           ng-model="vm.statistikParameter.bis" ng-required="true"
                                                           class="input-element"
                                                           dv-min-date="vm.minDate" dv-max-date="vm.maxDate">
                                            </dv-datepicker>
                                            <dv-error-messages for="kanton.bis_kanton.$error"
                                                               class="error"></dv-error-messages>
                                        </dv-input-container>
                                    </div>
                                    <div class="col-xs-3 ">
                                        <dv-input-container class="form-group">
                                            <label class="md-no-float"
                                                   for="kantonSelbstbehalt"
                                                   data-translate="LASTENAUSGLEICH_SELBSTBEHALT"></label>
                                            <input aria-describedby="kantonSelbstbehalt-error"
                                                   id="kantonSelbstbehalt" type="number" name="kantonSelbstbehalt"
                                                   ng-model="vm.statistikParameter.kantonSelbstbehalt"
                                                   class="input-element">
                                            <dv-error-messages for="kanton.kantonSelbstbehalt.$error"
                                                               class="error"></dv-error-messages>
                                        </dv-input-container>
                                    </div>
                                    <div class="col-xs-3 statistik-button">
                                        <dv-loading-button type="submit">
                                            <span class="uppercase" data-translate="GENERIEREN"></span>
                                        </dv-loading-button>
                                    </div>
                                </div>
                            </form>
                        </tab-body>
                    </dv-accordion-tab>
                </div>

                <div dv-show-element
                     dv-show-allowed-roles="['SACHBEARBEITER_BG','ADMIN_BG','SUPER_ADMIN','REVISOR', 'ADMIN_GEMEINDE', 'SACHBEARBEITER_GEMEINDE']">
                    <dv-accordion-tab tabid="mitarbeiterinnen">
                        <tab-title>
                            <span class="uppercase" data-translate="MITARBEITERINNEN"></span>
                            <dv-tooltip input-id="mitarbeiterinnen_info"
                                        ng-click="$event.stopPropagation()"
                                        text="'STATISTIK_MIRABEITERINNEN_HINT' | translate">
                            </dv-tooltip>
                        </tab-title>
                        <tab-body>
                            <form name="mitarbeiterinnen"
                                  ng-submit="vm.generateStatistik(mitarbeiterinnen, vm.TSStatistikParameterType.MITARBEITERINNEN)"
                                  novalidate>
                                <div class="row">
                                    <div class="col-xs-3">
                                        <dv-input-container class="form-group">
                                            <label class="md-no-float" for="von_mitarbeiterinnen"
                                                   data-translate="VON"></label>
                                            <dv-datepicker name="von_mitarbeiterinnen" id="von_mitarbeiterinnen"
                                                           ng-model="vm.statistikParameter.von" ng-required="true"
                                                           class="input-element">
                                            </dv-datepicker>
                                            <dv-error-messages for="mitarbeiterinnen.von_mitarbeiterinnen.$error"
                                                               class="error"></dv-error-messages>
                                        </dv-input-container>
                                    </div>
                                    <div class="col-xs-3">
                                        <dv-input-container class="form-group">
                                            <label class="md-no-float" for="bis_mitarbeiterinnen"
                                                   data-translate="BIS"></label>
                                            <dv-datepicker name="bis_mitarbeiterinnen" id="bis_mitarbeiterinnen"
                                                           ng-model="vm.statistikParameter.bis" ng-required="true"
                                                           class="input-element">
                                            </dv-datepicker>
                                            <dv-error-messages for="mitarbeiterinnen.bis_mitarbeiterinnen.$error"
                                                               class="error"></dv-error-messages>
                                        </dv-input-container>
                                    </div>
                                    <div class="col-xs-3 col-xs-offset-3 statistik-button">
                                        <dv-loading-button type="submit">
                                            <span class="uppercase" data-translate="GENERIEREN"></span>
                                        </dv-loading-button>
                                    </div>
                                </div>
                            </form>
                        </tab-body>
                    </dv-accordion-tab>
                </div>

                <div dv-show-element
                     dv-show-allowed-roles="['ADMIN_BG', 'ADMIN_TS', 'ADMIN_GEMEINDE', 'SUPER_ADMIN', 'REVISOR', 'ADMIN_TRAEGERSCHAFT',
                     'ADMIN_INSTITUTION', 'ADMIN_MANDANT', 'SACHBEARBEITER_MANDANT']">
                    <dv-accordion-tab tabid="benutzer">
                        <tab-title>
                            <span class="uppercase" data-translate="BENUTZER_STATISTIK"></span>
                            <dv-tooltip input-id="benutzer_info"
                                        ng-click="$event.stopPropagation()"
                                        text="'STATISTIK_BENUTZER_HINT' | translate">
                            </dv-tooltip>
                        </tab-title>
                        <tab-body>
                            <form name="benutzer"
                                  ng-submit="vm.generateStatistik(benutzer, vm.TSStatistikParameterType.BENUTZER)"
                                  novalidate>
                                <div class="row">
                                    <div class="col-xs-3 col-xs-offset-9 statistik-button statistik-no-fields">
                                        <dv-loading-button type="submit">
                                            <span class="uppercase" data-translate="GENERIEREN"></span>
                                        </dv-loading-button>
                                    </div>
                                </div>
                            </form>
                        </tab-body>
                    </dv-accordion-tab>
                </div>

                <div dv-show-element
                     dv-show-allowed-roles="['SACHBEARBEITER_BG','ADMIN_BG','SUPER_ADMIN','REVISOR', 'ADMIN_MANDANT', 'SACHBEARBEITER_MANDANT',
                     'ADMIN_GEMEINDE', 'SACHBEARBEITER_GEMEINDE']">
                    <dv-accordion-tab tabid="betreuung">
                        <tab-title>
                            <span class="uppercase" data-translate="GESUCHSTELLER_KINDER_BETREUUNG"></span>
                            <dv-tooltip input-id="betreuung_info"
                                        ng-click="$event.stopPropagation()"
                                        text="'STATISTIK_GESUCHSTELLER_KINDER_BETREUUNG_HINT' | translate">
                            </dv-tooltip>
                        </tab-title>
                        <tab-body>
                            <form name="betreuung"
                                  ng-submit="vm.generateStatistik(betreuung, vm.TSStatistikParameterType.GESUCHSTELLER_KINDER_BETREUUNG)"
                                  novalidate>
                                <div class="row">
                                    <div class="col-xs-3">
                                        <dv-input-container class="form-group">
                                            <label class="md-no-float" for="von_betreuung" data-translate="VON"></label>
                                            <dv-datepicker name="von_betreuung"
                                                           id="von_betreuung"
                                                           ng-model="vm.statistikParameter.von" ng-required="true"
                                                           class="input-element"
                                                           dv-min-date="vm.minDate" dv-max-date="vm.maxDate">
                                            </dv-datepicker>
                                            <dv-error-messages for="betreuung.von_betreuung.$error"
                                                               class="error"></dv-error-messages>
                                        </dv-input-container>
                                    </div>
                                    <div class="col-xs-3">
                                        <dv-input-container class="form-group">
                                            <label class="md-no-float" for="bis_betreuung" data-translate="BIS"></label>
                                            <dv-datepicker name="bis_betreuung" id="bis_betreuung"
                                                           ng-model="vm.statistikParameter.bis" ng-required="true"
                                                           class="input-element"
                                                           dv-min-date="vm.minDate" dv-max-date="vm.maxDate">
                                            </dv-datepicker>
                                            <dv-error-messages for="betreuung.bis_betreuung.$error"
                                                               class="error"></dv-error-messages>
                                        </dv-input-container>
                                    </div>
                                    <div class="col-xs-3">
                                        <div class="form-group">
                                            <label class="md-no-float" for="periode_betreuung"
                                                   data-translate="GESUCHSPERIODEN"></label>
                                            <div class="dv-select-style">
                                                <select name="periode_betreuung" id="periode_betreuung"
                                                        ng-model="vm.statistikParameter.gesuchsperiode"
                                                        ng-options="gesuchsperiode.id as gesuchsperiode.gesuchsperiodeString for gesuchsperiode in vm.gesuchsperioden | orderBy: 'name'"
                                                        class="form-control">
                                                    <option value="">{{'KEINE' | translate}}</option>
                                                </select>
                                                <dv-error-messages for="betreuung.periode_betreuung.$error"
                                                                   class="error"></dv-error-messages>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-xs-3 statistik-button">
                                        <dv-loading-button type="submit">
                                            <span class="uppercase" data-translate="GENERIEREN"></span>
                                        </dv-loading-button>
                                    </div>
                                </div>
                            </form>
                        </tab-body>
                    </dv-accordion-tab>
                </div>

                <!-- Kontaktdaten fÃ¼r Serienbriefe -->
                <div dv-show-element
                     dv-show-allowed-roles="['SUPER_ADMIN','ADMIN_BG','ADMIN_TS','ADMIN_GEMEINDE']">
                    <dv-accordion-tab tabid="massenversand">
                        <tab-title>
                            <span class="uppercase" data-translate="MASSENVERSAND"></span>
                            <dv-tooltip input-id="massenversand_info"
                                        ng-click="$event.stopPropagation()"
                                        text="'STATISTIK_SERIENBRIEFE_HINT' | translate">
                            </dv-tooltip>
                        </tab-title>
                        <tab-body>
                            <form name="massenversand"
                                  ng-submit="vm.generateStatistik(massenversand, 'MASSENVERSAND')"
                                  novalidate>

                                <!-- Datum von/bis, Gesuchsperiode -->
                                <div class="row">
                                    <div class="col-xs-3">
                                        <dv-input-container class="form-group">
                                            <label class="md-no-float" for="von_massenversand"
                                                   data-translate="VON"></label>
                                            <dv-datepicker name="von_massenversand"
                                                           ng-model="vm.statistikParameter.von"
                                                           class="input-element"
                                                           no-future dv-min-date="vm.minDate" dv-max-date="vm.maxDate">
                                            </dv-datepicker>
                                            <dv-error-messages for="massenversand.von_massenversand.$error"
                                                               class="error"></dv-error-messages>
                                        </dv-input-container>
                                    </div>
                                    <div class="col-xs-3">
                                        <dv-input-container class="form-group">
                                            <label class="md-no-float" for="bis_massenversand"
                                                   data-translate="BIS"></label>
                                            <dv-datepicker name="bis_massenversand" id="bis_massenversand"
                                                           ng-model="vm.statistikParameter.bis" ng-required="true"
                                                           class="input-element"
                                                           no-future dv-min-date="vm.minDate" dv-max-date="vm.maxDate">
                                            </dv-datepicker>
                                            <dv-error-messages for="massenversand.bis_massenversand.$error"
                                                               class="error"></dv-error-messages>
                                        </dv-input-container>
                                    </div>
                                    <div class="col-xs-3">
                                        <div class="form-group">
                                            <label class="md-no-float required" for="periode_massenversand"
                                                   data-translate="GESUCHSPERIODEN"></label>
                                            <div class="dv-select-style">
                                                <select name="periode_massenversand" id="periode_massenversand"
                                                        ng-model="vm.statistikParameter.gesuchsperiode"
                                                        ng-required="true"
                                                        ng-options="gesuchsperiode.id as gesuchsperiode.gesuchsperiodeString for gesuchsperiode in vm.gesuchsperioden | orderBy: 'name'"
                                                        class="form-control">
                                                </select>
                                                <dv-error-messages for="massenversand.periode_massenversand.$error"
                                                                   class="error"></dv-error-messages>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-xs-3 statistik-button">
                                        <dv-loading-button type="submit">
                                            <span class="uppercase" data-translate="GENERIEREN"></span>
                                        </dv-loading-button>
                                    </div>
                                </div>
                                <!-- Selektionskriterien -->
                                <div class="row">
                                    <div class="col-xs-3">
                                        <dv-input-container class="form-group">
                                            <label class="md-no-float">
                                                <span data-translate="MASSENVERSAND_GESUCHE"></span> *
                                            </label>
                                            <md-checkbox name="bgGesuche"
                                                         ng-model="vm.statistikParameter.bgGesuche"
                                                         ng-change="vm.gesuchTypeClicked()"
                                                         aria-label="MASSENVERSAND_BG_GESUCHE"
                                                         class="input-element">
                                                <span data-translate="MASSENVERSAND_BG_GESUCHE"></span>
                                            </md-checkbox>
                                            <md-checkbox name="bgGesuche"
                                                         ng-model="vm.statistikParameter.mischGesuche"
                                                         ng-change="vm.gesuchTypeClicked()"
                                                         aria-label="MASSENVERSAND_MISCH_GESUCHE"
                                                         class="input-element">
                                                <span data-translate="MASSENVERSAND_MISCH_GESUCHE"></span>
                                            </md-checkbox>
                                            <md-checkbox name="bgGesuche"
                                                         ng-model="vm.statistikParameter.tsGesuche"
                                                         ng-change="vm.gesuchTypeClicked()"
                                                         aria-label="MASSENVERSAND_TS_GESUCHE"
                                                         class="input-element">
                                                <span data-translate="MASSENVERSAND_TS_GESUCHE"></span>
                                            </md-checkbox>
                                        </dv-input-container>
                                        <div class="dv-error-messages" id="massenversand-no-selection-err">
                                            <span data-translate="MASSENVERSAND_ERROR_NICHTS_AUSGEWAEHLT"
                                                  ng-show="vm.flagShowErrorNoGesuchSelected"></span>
                                        </div>
                                    </div>
                                    <div class="col-xs-3">
                                        <dv-input-container class="form-group">
                                            <label class="md-no-float" for="ohneFolgegesuche"
                                                   data-translate="MASSENVERSAND_WEITERE_ANGABEN"></label>
                                            <md-checkbox id="ohneFolgegesuche" name="ohneFolgegesuche"
                                                         ng-model="vm.statistikParameter.ohneFolgegesuche"
                                                         aria-label="MASSENVERSAND_OHNE_FOLGEGESUCHE"
                                                         class="input-element">
                                                <span data-translate="MASSENVERSAND_OHNE_FOLGEGESUCHE"></span>
                                            </md-checkbox>
                                        </dv-input-container>
                                    </div>
                                </div>
                                <!-- Text zum Speichern -->
                                <div class="row">
                                    <div class="col-xs-9">
                                        <dv-input-container class="form-group">
                                            <label class="md-no-float" for="text_massenversand">
                                                <span data-translate="MASSENVERSAND_TEXT"></span>
                                                <dv-tooltip input-id="massenversand_info"
                                                            ng-click="$event.stopPropagation()"
                                                            text="'MASSENVERSAND_TEXT_HINT' | translate">
                                                </dv-tooltip>
                                            </label>
                                            <input aria-describedby="text_massenversand-error"
                                                   id="text_massenversand" type="text" name="text_massenversand"
                                                   ng-model="vm.statistikParameter.text"
                                                   dv-max-length
                                                   maxlength="250"
                                                   class="form-control">
                                            <dv-error-messages for="massenversand.text_massenversand.$error"
                                                               class="error"></dv-error-messages>
                                        </dv-input-container>
                                    </div>
                                </div>
                            </form>
                        </tab-body>
                    </dv-accordion-tab>
                </div>

                <div dv-show-element
                     dv-show-allowed-roles="['SUPER_ADMIN', 'ADMIN_MANDANT', 'SACHBEARBEITER_MANDANT',
                     'ADMIN_GEMEINDE', 'SACHBEARBEITER_GEMEINDE', 'ADMIN_BG', 'SACHBEARBEITER_BG', 'ADMIN_TS', 'SACHBEARBEITER_TS']">
                    <dv-accordion-tab tabid="institutionen">
                        <tab-title>
                            <span class="uppercase" data-translate="INSTITUTIONEN_STATISTIK"></span>
                            <dv-tooltip input-id="institutionen_info"
                                        ng-click="$event.stopPropagation()"
                                        text="'STATISTIK_INSTITUTIONEN_HINT' | translate">
                            </dv-tooltip>
                        </tab-title>
                        <tab-body>
                            <form name="institutionen"
                                  ng-submit="vm.generateStatistik(institutionen, vm.TSStatistikParameterType.INSTITUTIONEN)"
                                  novalidate>
                                <div class="row">
                                    <div class="col-xs-3 col-xs-offset-9 statistik-button statistik-no-fields">
                                        <dv-loading-button type="submit">
                                            <span class="uppercase" data-translate="GENERIEREN"></span>
                                        </dv-loading-button>
                                    </div>
                                </div>
                            </form>
                        </tab-body>
                    </dv-accordion-tab>
                </div>

                <div dv-show-element
                     dv-show-allowed-roles="['SUPER_ADMIN']">
                    <dv-accordion-tab tabid="verrechnung">
                        <tab-title>
                            <span class="uppercase" data-translate="VERRECHNUNG_KIBON_STATISTIK"></span>
                            <dv-tooltip input-id="verrechnung_info"
                                        ng-click="$event.stopPropagation()"
                                        text="'STATISTIK_VERRECHNUNG_KIBON_HINT' | translate">
                            </dv-tooltip>
                        </tab-title>
                        <tab-body>
                            <form name="verrechnung"
                                  ng-submit="vm.generateStatistik(verrechnung, vm.TSStatistikParameterType.VERRECHNUNG_KIBON)"
                                  novalidate>
                                <div class="row">
                                    <div class="col-xs-12 form-group md-no-float statistik-no-fields">
                                        <span data-translate="VERRECHNUNG_KIBON_INFO"></span>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-xs-3">
                                        <dv-input-container class="form-group">
                                            <md-checkbox name="doSave"
                                                         ng-model="vm.statistikParameter.doSave"
                                                         aria-label="VERRECHNUNG_KIBON_DEFINITIV"
                                                         class="input-element">
                                                <span data-translate="VERRECHNUNG_KIBON_DEFINITIV"></span>
                                            </md-checkbox>
                                        </dv-input-container>
                                    </div>
                                    <div class="col-xs-3 ">
                                        <dv-input-container class="form-group">
                                            <label class="md-no-float"
                                                   for="betragProKind"
                                                   data-translate="VERRECHNUNG_KIBON_BETRAG_PRO_KIND"></label>
                                            <input aria-describedby="betragProKind-error"
                                                   id="betragProKind" type="text" name="betragProKind"
                                                   ng-required="true"
                                                   ng-model="vm.statistikParameter.betragProKind"
                                                   class="input-element">
                                            <dv-error-messages for="verrechnung.betragProKind.$error"
                                                               class="error"></dv-error-messages>
                                        </dv-input-container>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-xs-3 col-xs-offset-9 statistik-button statistik-no-fields">
                                        <dv-loading-button type="submit">
                                            <span class="uppercase" data-translate="GENERIEREN"></span>
                                        </dv-loading-button>
                                    </div>
                                </div>
                            </form>
                        </tab-body>
                    </dv-accordion-tab>
                </div>

                <div dv-show-element
                     dv-show-allowed-roles="['SUPER_ADMIN']">
                    <dv-accordion-tab tabid="lastenausgleich">
                        <tab-title>
                            <span class="uppercase" data-translate="LASTENAUSGLEICH_KIBON_STATISTIK"></span>
                            <dv-tooltip input-id="lastenausgleich_info"
                                        ng-click="$event.stopPropagation()"
                                        text="'STATISTIK_LASTENAUSGLEICH_KIBON_HINT' | translate">
                            </dv-tooltip>
                        </tab-title>
                        <tab-body>
                            <form name="lastenausgleich"
                                  ng-submit="vm.generateStatistik(lastenausgleich, vm.TSStatistikParameterType.LASTENAUSGLEICH_KIBON)"
                                  novalidate>
                                <div class="row">
                                    <div class="col-xs-3">
                                        <div class="form-group">
                                            <label class="md-no-float" for="jahr_lastenausgleich"
                                                   data-translate="PARAMETER_JAHR"></label>
                                            <div class="dv-select-style">
                                                <select name="jahr_lastenausgleich" id="jahr_lastenausgleich"
                                                        ng-model="vm.statistikParameter.jahr"
                                                        ng-options="year for year in vm.years | orderBy: 'name'"
                                                        class="form-control">
                                                </select>
                                                <dv-error-messages for="lastenausgleich.jahr_lastenausgleich.$error"
                                                                   class="error"></dv-error-messages>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-xs-3 col-xs-offset-6 statistik-button statistik-no-fields">
                                        <dv-loading-button type="submit">
                                            <span class="uppercase" data-translate="GENERIEREN"></span>
                                        </dv-loading-button>
                                    </div>
                                </div>
                            </form>
                        </tab-body>
                    </dv-accordion-tab>
                </div>

                <div ng-if="vm.institutionStammdatenList.length">
                    <div dv-show-element
                         dv-show-allowed-roles="['SUPER_ADMIN', 'ADMIN_MANDANT', 'SACHBEARBEITER_MANDANT',
                     'ADMIN_GEMEINDE', 'SACHBEARBEITER_GEMEINDE', 'ADMIN_TS', 'SACHBEARBEITER_TS', 'ADMIN_INSTITUTION',
                     'SACHBEARBEITER_INSTITUTION', 'ADMIN_TRAEGERSCHAFT', 'SACHBEARBEITER_TRAEGERSCHAFT']">
                        <dv-accordion-tab tabid="tagesschuleAnmeldungen">
                            <tab-title>
                                <span class="uppercase" data-translate="TAGESSCHULE_ANMELDUNGEN_STATISTIK"></span>
                                <dv-tooltip input-id="lastenausgleich_info"
                                            ng-click="$event.stopPropagation()"
                                            text="'TAGESSCHULE_ANMELDUNGEN_STATISTIK_INFO' | translate">
                                </dv-tooltip>
                            </tab-title>
                            <tab-body>
                                <form name="tagesschuleAnmeldungen"
                                      ng-submit="vm.generateStatistik(tagesschuleAnmeldungen, vm.TSStatistikParameterType.TAGESSCHULE_ANMELDUNGEN)"
                                      novalidate>
                                    <div class="row">
                                        <div class="col-xs-3">
                                            <div class="form-group">
                                                <label class="md-no-float" for="tagesschuleAnmeldungenSelect"
                                                       data-translate="TAGESSCHULE"></label>
                                                <div class="dv-select-style">
                                                    <select name="tagesschuleAnmeldungenSelect"
                                                            id="tagesschuleAnmeldungenSelect"
                                                            ng-model="vm.statistikParameter.tagesschuleAnmeldungen"
                                                            class="form-control"
                                                            required>
                                                        <option ng-repeat="institutionStammdaten in vm.institutionStammdatenList"
                                                                ng-value="institutionStammdaten">{{institutionStammdaten.institution.name}}</option>
                                                    </select>
                                                    <dv-error-messages for="tagesschuleAnmeldungen.tagesschuleAnmeldungenSelect.$error"
                                                                       class="error"></dv-error-messages>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-xs-3" ng-if="vm.statistikParameter.tagesschuleAnmeldungen">
                                            <div class="form-group">
                                                <label class="md-no-float" for="tagesschuleAnmeldungenGesuchsperiode"
                                                       data-translate="GESUCHSPERIODEN"></label>
                                                <div class="dv-select-style">
                                                    <select name="tagesschuleAnmeldungenGesuchsperiode"
                                                            id="tagesschuleAnmeldungenGesuchsperiode"
                                                            ng-model="vm.statistikParameter.gesuchsperiode"
                                                            class="form-control"
                                                            required>
                                                        <option ng-repeat="gesuchsperiode in vm.getGesuchsperiodenForTagesschule(vm.statistikParameter.tagesschuleAnmeldungen)"
                                                                ng-value="gesuchsperiode.id">{{gesuchsperiode.gesuchsperiodeString}}</option>
                                                    </select>
                                                    <dv-error-messages for="tagesschuleAnmeldungen.tagesschuleAnmeldungenSelect.$error"
                                                                       class="error"></dv-error-messages>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-xs-3 statistik-button statistik-no-fields">
                                            <dv-loading-button type="submit">
                                                <span class="uppercase" data-translate="GENERIEREN"></span>
                                            </dv-loading-button>
                                        </div>
                                    </div>
                                </form>
                            </tab-body>
                        </dv-accordion-tab>
                    </div>
                </div>

                <div dv-show-element
                     dv-show-allowed-roles="['SUPER_ADMIN', 'ADMIN_MANDANT', 'SACHBEARBEITER_MANDANT',
                     'ADMIN_GEMEINDE', 'SACHBEARBEITER_GEMEINDE', 'ADMIN_TS', 'SACHBEARBEITER_TS']">
                    <dv-accordion-tab tabid="tagesschuleRechnungsstellung">
                        <tab-title>
                            <span class="uppercase" data-translate="TAGESSCHULE_RECHNUNGSSTELLUNG_STATISTIK"></span>
                            <dv-tooltip input-id="tagesschuleRechnungsstellung_info"
                                        ng-click="$event.stopPropagation()"
                                        text="'TAGESSCHULE_RECHNUNGSSTELLUNG_STATISTIK_HINT' | translate">
                            </dv-tooltip>
                        </tab-title>
                        <tab-body>
                            <form name="tagesschuleRechnungsstellung"
                                  ng-submit="vm.generateStatistik(tagesschuleRechnungsstellung, vm.TSStatistikParameterType.TAGESSCHULE_RECHNUNGSSTELLUNG)"
                                  novalidate>
                                <div class="row">
                                    <div class="col-xs-3 col-xs-offset-9 statistik-button statistik-no-fields">
                                        <dv-loading-button type="submit">
                                            <span class="uppercase" data-translate="GENERIEREN"></span>
                                        </dv-loading-button>
                                    </div>
                                </div>
                            </form>
                        </tab-body>
                    </dv-accordion-tab>
                </div>

                <div dv-show-element
                     dv-show-allowed-roles="['SUPER_ADMIN', 'ADMIN_MANDANT', 'SACHBEARBEITER_MANDANT']">
                    <dv-accordion-tab tabid="notrecht">
                        <tab-title>
                            <span class="uppercase" data-translate="NOTRECHT_STATISTIK"></span>
                            <dv-tooltip input-id="notrecht_info"
                                        ng-click="$event.stopPropagation()"
                                        text="'STATISTIK_NOTRECHT_HINT' | translate">
                            </dv-tooltip>
                        </tab-title>
                        <tab-body>
                            <form name="notrecht"
                                  ng-submit="vm.generateStatistik(notrecht, vm.TSStatistikParameterType.NOTRECHT)"
                                  novalidate>
                                <div class="row">
                                    <div class="col-xs-12 form-group md-no-float statistik-no-fields">
                                        <span data-translate="NOTRECHT_INFO"></span>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-xs-3">
                                        <dv-input-container class="form-group">
                                            <md-checkbox name="doSave"
                                                         ng-model="vm.statistikParameter.doSave"
                                                         aria-label="NOTRECHT_DEFINITIV"
                                                         class="input-element">
                                                <span data-translate="NOTRECHT_ZAHLUNGEN_AUSLOESEN"></span>
                                            </md-checkbox>
                                        </dv-input-container>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-xs-3 col-xs-offset-9 statistik-button statistik-no-fields">
                                        <dv-loading-button type="submit">
                                            <span class="uppercase" data-translate="GENERIEREN"></span>
                                        </dv-loading-button>
                                    </div>
                                </div>
                            </form>
                        </tab-body>
                    </dv-accordion-tab>
                    <dv-accordion-tab tabid="gemeinden">
                        <tab-title>
                            <span class="uppercase" data-translate="GEMEINDEN_STATISTIK"></span>
                            <dv-tooltip input-id="notrecht_info"
                                        ng-click="$event.stopPropagation()"
                                        text="'STATISTIK_GEMEINDEN_HINT' | translate">
                            </dv-tooltip>
                        </tab-title>
                        <tab-body>
                            <form name="gemeinden"
                                  ng-submit="vm.generateStatistik(gemeinden, vm.TSStatistikParameterType.GEMEINDEN)"
                                  novalidate>
                                <div class="row">
                                    <div class="col-xs-3 col-xs-offset-9 statistik-button statistik-no-fields">
                                        <dv-loading-button type="submit">
                                            <span class="uppercase" data-translate="GENERIEREN"></span>
                                        </dv-loading-button>
                                    </div>
                                </div>
                            </form>
                        </tab-body>
                    </dv-accordion-tab>
                </div>
                <div ng-if="vm.showMahlzeitenverguenstigungStatistik()">
                    <div dv-show-element
                         dv-show-allowed-roles="['SACHBEARBEITER_BG', 'ADMIN_BG', 'ADMIN_GEMEINDE', 'SACHBEARBEITER_GEMEINDE', 'SUPER_ADMIN',
                     'ADMIN_TS', 'SACHBEARBEITER_TS']">
                        <dv-accordion-tab tabid="mahlzeitenverguenstigung">
                            <tab-title>
                                <span class="uppercase" data-translate="MAHLZEITENVERGUENSTIGUNG"></span>
                            </tab-title>
                            <tab-body>
                                <form name="mahlzeitenverguenstigung"
                                      ng-submit="vm.generateStatistik(mahlzeitenverguenstigung, vm.TSStatistikParameterType.MAHLZEITENVERGUENSTIGUNG)"
                                      novalidate>
                                    <div class="row">
                                        <div class="col-xs-3">
                                            <dv-input-container class="form-group">
                                                <label class="md-no-float"
                                                       for="von_mahlzeitenverguenstigung"
                                                       data-translate="VON"></label>
                                                <dv-datepicker name="von_mahlzeitenverguenstigung"
                                                               id="von_mahlzeitenverguenstigung"
                                                               ng-model="vm.statistikParameter.von"
                                                               ng-required="true"
                                                               class="input-element">
                                                </dv-datepicker>
                                                <dv-error-messages for="mahlzeitenverguenstigung.von_mahlzeitenverguenstigung.$error"
                                                                   class="error"></dv-error-messages>
                                            </dv-input-container>
                                        </div>
                                        <div class="col-xs-3">
                                            <dv-input-container class="form-group">
                                                <label class="md-no-float"
                                                       for="bis_mahlzeitenverguenstigung"
                                                       data-translate="BIS"></label>
                                                <dv-datepicker name="bis_mahlzeitenverguenstigung"
                                                               id="bis_mahlzeitenverguenstigung"
                                                               ng-model="vm.statistikParameter.bis"
                                                               ng-required="true"
                                                               class="input-element">
                                                </dv-datepicker>
                                                <dv-error-messages for="mahlzeitenverguenstigung.bis_mahlzeitenverguenstigung.$error"
                                                                   class="error"></dv-error-messages>
                                            </dv-input-container>
                                        </div>
                                        <div class="col-xs-3" ng-if="vm.gemeindenMahlzeitenverguenstigungen.length > 1">
                                            <div class="form-group">
                                                <label class="md-no-float required" for="gemeinden_mahlzeitenverguenstigung"
                                                       data-translate="GEMEINDE"></label>
                                                <div class="dv-select-style">
                                                    <select name="gemeinden_mahlzeitenverguenstigung"
                                                            id="gemeinden_mahlzeitenverguenstigung"
                                                            ng-model="vm.statistikParameter.gemeindeMahlzeitenverguenstigungen"
                                                            ng-options="gemeinde as gemeinde.name for gemeinde in vm.gemeindenMahlzeitenverguenstigungen | orderBy: 'name'"
                                                            class="form-control"
                                                            required>
                                                        <option value="">{{'KEINE' | translate}}</option>
                                                    </select>
                                                    <dv-error-messages for="mahlzeitenverguenstigung.gemeinden_mahlzeitenverguenstigung.$error"
                                                                       class="error"></dv-error-messages>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-xs-3 statistik-button">
                                            <dv-loading-button type="submit"
                                                               style="margin-left:auto;margin-right:auto;width:13rem;">
                                                <span class="uppercase" data-translate="GENERIEREN"></span>
                                            </dv-loading-button>
                                        </div>
                                    </div>
                                </form>
                            </tab-body>
                        </dv-accordion-tab>
                    </div>
                </div>
            </dv-accordion>
        </div>
    </div>

    <!-- BatchJobs -->
    <div class="row margin-top-40">

        <div class="col-md-10 col-md-offset-1">
            <h2>
                <span data-translate="LAST_REPORTS"></span>
                {{vm.titleValue}}
            </h2>

            <table st-table="displayedCollection" st-safe-src="vm.userjobs"
                   class="table table-hover ebegu-table" id="{{vm.tableId}}" title="{{vm.tableTitle}}">
                <thead>
                <tr>
                    <th data-translate="TYP"></th>
                    <th data-translate="ERSTELLT"></th>
                    <th data-translate="GESTARTET"></th>
                    <th data-translate="BEENDET"></th>
                    <th data-translate="STATUS"></th>

                    <th></th>
                </tr>
                </thead>
                <tbody>
                <tr ng-repeat="row in displayedCollection" st-select-row="row" st-select-mode="single"
                    ng-click="vm.rowClicked(row)" role="row" tabindex="-1">
                    <td>
                        <span ng-if="row.params" ng-bind="'ReportType_'+row.params | translate"
                              title="{{row.requestURI}}"></span>
                    </td>
                    <td ng-bind="row.timestampErstellt | amDateFormat : 'DD.MM.YYYY HH:mm'"></td>
                    <td><span ng-if="row.execution.startTime"
                              ng-bind="row.execution.startTime | amDateFormat : 'DD.MM.YYYY HH:mm'"></span></td>
                    <td><span ng-if="row.execution.endTime"
                              ng-bind="row.execution.endTime | amDateFormat : 'DD.MM.YYYY HH:mm'"></span></td>
                    <td ng-bind="'BatchJobStatus_' + row.batchJobStatus | translate"></td>
                    <td class="dateientable-td symbol">
                                <span ng-if="row.execution && row.execution.batchStatus === 'COMPLETED'"
                                      class="fa fa-download"
                                      title="{{'DOKUMENT_DOWNLOAD' | translate}}"
                                      aria-label="{{'DOKUMENT_DOWNLOAD' | translate}}"
                                      style="color: black"></span>
                    </td>

                <tr ng-if="vm.userjobs.length === 0">
                    <td colspan="6" class="empty-table" data-translate="KEIN_EINTRAG">...</td>
                </tr>
                </tbody>
            </table>

        </div>
    </div>

    <div class="col-md-10 col-md-offset-1 margin-top-40">
        <div dv-display-element
             dv-display-allowed-roles="vm.TSRoleUtil.getSuperAdminRoles()">

            <dv-loading-button button-class="" button-click="vm.showAllJobs()" type="button">
                <span class="fa fa-refresh"></span>
                <span data-translate="SHOW_JOBS"></span>
            </dv-loading-button>
            <div ng-if="vm.allJobs">
                <p>Batch Jobs from Wildfly Batch Module</p>
                <pre>{{vm.allJobs |json}}</pre>
            </div>
        </div>
    </div>

</div>
