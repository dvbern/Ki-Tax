<!--
  ~ Ki-Tax: System for the management of external childcare subsidies
  ~ Copyright (C) 2017 City of Bern Switzerland
  ~ This program is free software: you can redistribute it and/or modify
  ~ it under the terms of the GNU Affero General Public License as
  ~ published by the Free Software Foundation, either version 3 of the
  ~ License, or (at your option) any later version.
  ~ This program is distributed in the hope that it will be useful,
  ~ but WITHOUT ANY WARRANTY; without even the implied warranty of
  ~ MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
  ~ GNU Affero General Public License for more details.
  ~ You should have received a copy of the GNU Affero General Public License
  ~ along with this program. If not, see <http://www.gnu.org/licenses/>.
  -->

<md-autocomplete flex=""
                 md-input-name="autocompleteField"
                 md-min-length="3"
                 md-no-cache="vm.noCache"
                 md-delay="vm.delay"
                 md-selected-item="vm.selectedItem"
                 md-selected-item-change="vm.selectItemChanged()"
                 md-search-text="vm.searchQuery"
                 md-items="item in vm.querySearch(vm.searchQuery)"
                 md-item-text="item.antragDTO.getQuicksearchString()"
                 md-require-match="false"
                 placeholder="&#xF002;"
                 md-dropdown-items="9"
                 >
    <md-item-template>
        <dv-search-result-icon entry="item"></dv-search-result-icon>
        <span md-highlight-text="vm.searchQuery" md-highlight-flags="i"
              ng-class="{'ALL':'allresultsLink'}[item.entity]">
            {{item.antragDTO.getQuicksearchString()}}{{item.text ? ' ('+ item.text+ ') ': ''}}
        </span>
    </md-item-template>

</md-autocomplete>
