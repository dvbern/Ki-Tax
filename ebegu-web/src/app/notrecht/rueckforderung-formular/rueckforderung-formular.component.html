<!--
  ~ Copyright (C) 2020 DV Bern AG, Switzerland
  ~
  ~ This program is free software: you can redistribute it and/or modify
  ~ it under the terms of the GNU Affero General Public License as
  ~ published by the Free Software Foundation, either version 3 of the
  ~ License, or (at your option) any later version.
  ~
  ~ This program is distributed in the hope that it will be useful,
  ~ but WITHOUT ANY WARRANTY; without even the implied warranty of
  ~ MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
  ~ GNU Affero General Public License for more details.
  ~
  ~ You should have received a copy of the GNU Affero General Public License
  ~ along with this program. If not, see <https://www.gnu.org/licenses/>.
  -->
<dv-full-height-container>
    <form role="form"
		  #form="ngForm"
          [ngClass]="{'ng-submitted': form.submitted}"
          *ngIf="rueckforderungFormular$ | async as rueckforderungFormular"
          (ngSubmit)="saveRueckforderungFormular(rueckforderungFormular)"
          novalidate>
        <div class="notrecht adminModul" flex="auto">
            <div class="col-md-8 col-md-offset-2">

                <div class="row viewTitle">
                    <div class="col-md-12">
                        <h2>{{'RUECKFORDERUNGSFORMULARE_DETAIL' | translate: {
							name:
							rueckforderungFormular.institutionStammdaten.institution.name
						}
                            }}</h2>
                        <hr class="header">
                    </div>
                </div>
                <fieldset>
                    <div class="row">
                        <div class="col-sm-6">
                            <div class="form-group">
                                <label class="required" translate for="anzahl_plaetze_stufe1_insti_in_tage_id">
                                    RUECKFORDERUNGFORMULAR_ANZAHL_PLAETZE</label>
                                <input id="anzahl_plaetze_stufe1_insti_in_tage_id" type="number"
                                       name="anzahl_plaetze_stufe1_insti_in_tage"
                                       #stufe1InstitutionKostenuebernahmeAnzahlTage="ngModel"
                                       [(ngModel)]="rueckforderungFormular.stufe1InstitutionKostenuebernahmeAnzahlTage"
                                       class="form-control" required>
                                <dv-error-messages [errorObject]="stufe1InstitutionKostenuebernahmeAnzahlTage.errors"
                                                   inputId="anzahl_plaetze_stufe1_insti_in_tage_id">
                                </dv-error-messages>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-6">
                            <div class="form-group">
                                <label class="required" translate for="kostenuebernahme_betreuung_stuf1_insti_id">
                                    RUECKFORDERUNGFORMULAR_KOSTENUEBERNAHME_BETREUUNG</label>
                                <input id="kostenuebernahme_betreuung_stuf1_insti_id" type="number"
                                       name="kostenuebernahme_betreuung_stuf1_insti"
									   #stufe1InstitutionKostenuebernahmeBetreuung="ngModel"
                                       [(ngModel)]="rueckforderungFormular.stufe1InstitutionKostenuebernahmeBetreuung"
                                       class="form-control" required>
                                <dv-error-messages [errorObject]="stufe1InstitutionKostenuebernahmeBetreuung.errors"
                                                   inputId="kostenuebernahme_betreuung_stuf1_insti_id">
                                </dv-error-messages>
                            </div>
                        </div>
                    </div>
                    <!-- Checkbox -->
                    <div class="row">
                        <div class="col-sm-6">
                            <div class="form-group">
                                <mat-checkbox id="betreuungKorrektAusgewiesenCbx_id"
                                              name="betreuungKorrektAusgewiesenCbx_id"
                                              [(ngModel)]="betreuungKorrektAusgewiesen" required>
                                    {{'BETREUUNG_KORREKT_AUSGEWIESEN'|translate}}
                                </mat-checkbox>
                                <mat-checkbox id="gutscheinPlaetzenReduziertCbx_id"
                                              name="gutscheinPlaetzenReduziertCbx_id"
                                              [(ngModel)]="gutscheinPlaetzenReduziert" required>
                                    {{'GUTSCHEIN_PLAETZEN_REDUZIERT'|translate}}
                                </mat-checkbox>
                                <mat-checkbox id="erstattungGemaessKantonCbx_id"
                                              name="erstattungGemaessKantonCbx_id"
                                              [(ngModel)]="erstattungGemaessKanton" required>
                                    {{'ERSTATTUNG_GEMAESS_KANTON'|translate}}
                                </mat-checkbox>
                                <mat-checkbox id="mahlzeitenBGSubventionenGebuehrensystemCbx_id"
                                              name="mahlzeitenBGSubventionenGebuehrensystemCbx_id"
                                              [(ngModel)]="mahlzeitenBGSubventionenGebuehrensystem" required>
                                    {{'MAHLZEITEN_BG_SUBVENTIONEN_GEBUEHRENSYSTEM'|translate}}
                                </mat-checkbox>
                                <mat-checkbox id="belegeEinreichenBetrageKantonZurueckfordernCbx_id"
                                              name="belegeEinreichenBetrageKantonZurueckfordernCbx_id"
                                              [(ngModel)]="belegeEinreichenBetrageKantonZurueckfordern" required>
                                    {{'BELEGE_EINREICHEN_BETRAG_KANTON_ZURUECKFORDERN'|translate}}
                                </mat-checkbox>
                            </div>
                        </div>
                    </div>
                </fieldset>
            </div>
        </div>
        <!-- Buttons -->
        <div class="dv-footer">
            <dv-loading-button *ngIf="showButtonAbsenden(rueckforderungFormular)" [type]="'submit'"
                               [buttonDisabled]="!enableRueckforderungAbschliessen()">
                <span translate>ABSENDEN</span>
            </dv-loading-button>
            <dv-loading-button *ngIf="showButtonAbsenden(rueckforderungFormular)" (buttonClick)="rueckforderungAbschliessen(rueckforderungFormular);">
                <span translate>KEIN_GESUCH_BEANTRAGEN</span>
            </dv-loading-button>
            <dv-loading-button *ngIf="showButtonGeprueft(rueckforderungFormular)" [type]="'submit'">
                <span translate>GEPRUEFT</span>
            </dv-loading-button>
            <button type="button"
                    class="dv-btn cancel-button"
                    [uiSref]="'notrecht.list'"
                    translate>CANCEL
            </button>
        </div>
    </form>
</dv-full-height-container>
